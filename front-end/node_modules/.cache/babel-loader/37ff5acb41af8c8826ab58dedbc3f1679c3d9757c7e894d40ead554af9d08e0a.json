{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KUSANAGI\\\\Videos\\\\BlogPost-main\\\\front-end\\\\src\\\\features\\\\posts\\\\EditPostForm.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useGetPostsQuery } from './postsSlice';\nimport { useUpdatePostMutation, useDeletePostMutation } from \"./postsSlice\";\nimport { useGetUsersQuery } from '../users/usersSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditPostForm = () => {\n  _s();\n  const {\n    postId\n  } = useParams();\n  const navigate = useNavigate();\n  const [updatePost, {\n    isLoading\n  }] = useUpdatePostMutation();\n  const [deletePost] = useDeletePostMutation();\n  const {\n    post,\n    isLoading: isLoadingPosts,\n    isSuccess\n  } = useGetPostsQuery('getPosts', {\n    selectFromResult: ({\n      data,\n      isLoading,\n      isSuccess\n    }) => ({\n      post: data === null || data === void 0 ? void 0 : data.entities[postId],\n      isLoading,\n      isSuccess\n    })\n  });\n  const {\n    data: users,\n    isSuccess: isSuccessUsers\n  } = useGetUsersQuery('getUsers');\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [userId, setUserId] = useState('');\n  useEffect(() => {\n    if (isSuccess) {\n      setTitle(post.title);\n      setContent(post.body);\n      setUserId(post.userId);\n    }\n  }, [isSuccess, post === null || post === void 0 ? void 0 : post.title, post === null || post === void 0 ? void 0 : post.body, post === null || post === void 0 ? void 0 : post.userId]);\n  if (isLoadingPosts) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 32\n  }, this);\n  if (!post) {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Post not found!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this);\n  }\n  const onTitleChanged = e => setTitle(e.target.value);\n  const onContentChanged = e => setContent(e.target.value);\n  const onAuthorChanged = e => setUserId(Number(e.target.value));\n  const canSave = [title, content, userId].every(Boolean) && !isLoading;\n  const onSavePostClicked = async () => {\n    if (canSave) {\n      try {\n        await updatePost({\n          id: post === null || post === void 0 ? void 0 : post.id,\n          title,\n          body: content,\n          userId\n        }).unwrap();\n        setTitle('');\n        setContent('');\n        setUserId('');\n        navigate(`/post/${postId}`);\n      } catch (err) {\n        console.error('Failed to save the post', err);\n      }\n    }\n  };\n  let usersOptions;\n  if (isSuccessUsers) {\n    usersOptions = users.ids.map(id => /*#__PURE__*/_jsxDEV(\"option\", {\n      value: id,\n      children: users.entities[id].name\n    }, id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this));\n  }\n  const onDeletePostClicked = async () => {\n    try {\n      await deletePost({\n        id: post === null || post === void 0 ? void 0 : post.id\n      }).unwrap();\n      setTitle('');\n      setContent('');\n      setUserId('');\n      navigate('/');\n    } catch (err) {\n      console.error('Failed to delete the post', err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Edit Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"postTitle\",\n        children: \"Post Title:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"postTitle\",\n        name: \"postTitle\",\n        value: title,\n        onChange: onTitleChanged\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"postAuthor\",\n        children: \"Author:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"postAuthor\",\n        value: userId,\n        onChange: onAuthorChanged,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this), usersOptions]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"postContent\",\n        children: \"Content:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"postContent\",\n        name: \"postContent\",\n        value: content,\n        onChange: onContentChanged\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onSavePostClicked,\n        disabled: !canSave,\n        children: \"Save Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onDeletePostClicked,\n        children: \"Delete Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this);\n};\n_s(EditPostForm, \"uZMatchSVTsuxczKV0T0+jC3fgg=\", false, function () {\n  return [useParams, useNavigate, useUpdatePostMutation, useDeletePostMutation, useGetPostsQuery, useGetUsersQuery];\n});\n_c = EditPostForm;\nexport default EditPostForm;\nvar _c;\n$RefreshReg$(_c, \"EditPostForm\");","map":{"version":3,"names":["useState","useEffect","useParams","useNavigate","useGetPostsQuery","useUpdatePostMutation","useDeletePostMutation","useGetUsersQuery","jsxDEV","_jsxDEV","EditPostForm","_s","postId","navigate","updatePost","isLoading","deletePost","post","isLoadingPosts","isSuccess","selectFromResult","data","entities","users","isSuccessUsers","title","setTitle","content","setContent","userId","setUserId","body","children","fileName","_jsxFileName","lineNumber","columnNumber","onTitleChanged","e","target","value","onContentChanged","onAuthorChanged","Number","canSave","every","Boolean","onSavePostClicked","id","unwrap","err","console","error","usersOptions","ids","map","name","onDeletePostClicked","htmlFor","type","onChange","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/KUSANAGI/Videos/BlogPost-main/front-end/src/features/posts/EditPostForm.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport { useGetPostsQuery } from './postsSlice';\nimport { useUpdatePostMutation, useDeletePostMutation } from \"./postsSlice\";\nimport { useGetUsersQuery } from '../users/usersSlice';\n\nconst EditPostForm = () => {\n    const { postId } = useParams()\n    const navigate = useNavigate()\n\n    const [updatePost, { isLoading }] = useUpdatePostMutation()\n    const [deletePost] = useDeletePostMutation()\n\n    const { post, isLoading: isLoadingPosts, isSuccess } = useGetPostsQuery('getPosts', {\n        selectFromResult: ({ data, isLoading, isSuccess }) => ({\n            post: data?.entities[postId],\n            isLoading,\n            isSuccess\n        }),\n    })\n\n    const { data: users, isSuccess: isSuccessUsers } = useGetUsersQuery('getUsers')\n\n    const [title, setTitle] = useState('')\n    const [content, setContent] = useState('')\n    const [userId, setUserId] = useState('')\n\n    useEffect(() => {\n        if (isSuccess) {\n            setTitle(post.title)\n            setContent(post.body)\n            setUserId(post.userId)\n        }\n    }, [isSuccess, post?.title, post?.body, post?.userId])\n\n    if (isLoadingPosts) return <p>Loading...</p>\n\n    if (!post) {\n        return (\n            <section>\n                <h2>Post not found!</h2>\n            </section>\n        )\n    }\n\n    const onTitleChanged = e => setTitle(e.target.value)\n    const onContentChanged = e => setContent(e.target.value)\n    const onAuthorChanged = e => setUserId(Number(e.target.value))\n\n    const canSave = [title, content, userId].every(Boolean) && !isLoading;\n\n    const onSavePostClicked = async () => {\n        if (canSave) {\n            try {\n                await updatePost({ id: post?.id, title, body: content, userId }).unwrap()\n\n                setTitle('')\n                setContent('')\n                setUserId('')\n                navigate(`/post/${postId}`)\n            } catch (err) {\n                console.error('Failed to save the post', err)\n            }\n        }\n    }\n\n    let usersOptions\n    if (isSuccessUsers) {\n        usersOptions = users.ids.map(id => (\n            <option\n                key={id}\n                value={id}\n            >{users.entities[id].name}</option>\n        ))\n    }\n\n    const onDeletePostClicked = async () => {\n        try {\n            await deletePost({ id: post?.id }).unwrap()\n\n            setTitle('')\n            setContent('')\n            setUserId('')\n            navigate('/')\n        } catch (err) {\n            console.error('Failed to delete the post', err)\n        }\n    }\n\n    return (\n        <section>\n            <h2>Edit Post</h2>\n            <form>\n                <label htmlFor=\"postTitle\">Post Title:</label>\n                <input\n                    type=\"text\"\n                    id=\"postTitle\"\n                    name=\"postTitle\"\n                    value={title}\n                    onChange={onTitleChanged}\n                />\n                <label htmlFor=\"postAuthor\">Author:</label>\n                <select id=\"postAuthor\" value={userId} onChange={onAuthorChanged}>\n                    <option value=\"\"></option>\n                    {usersOptions}\n                </select>\n                <label htmlFor=\"postContent\">Content:</label>\n                <textarea\n                    id=\"postContent\"\n                    name=\"postContent\"\n                    value={content}\n                    onChange={onContentChanged}\n                />\n                <button\n                    type=\"button\"\n                    onClick={onSavePostClicked}\n                    disabled={!canSave}\n                >\n                    Save Post\n                </button>\n                <button\n                    type=\"button\"\n                    onClick={onDeletePostClicked}\n                >\n                    Delete Post\n                </button>\n            </form>\n        </section>\n    )\n}\n\nexport default EditPostForm"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}